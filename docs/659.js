(self.webpackChunkmap_observer=self.webpackChunkmap_observer||[]).push([[659],{914:(X,U,a)=>{"use strict";a.d(U,{r:()=>Q});var t=a(457),g=a(655),e=a(2382),b=a(5092),O=a(6565),F=a(4987),x=a(8372),n=a(5e3),c=a(9889),P=a(9808);function q(y,_){if(1&y&&(n.TgZ(0,"option",15),n._uU(1),n.qZA()),2&y){const d=_.$implicit;n.Q6J("value",d.type),n.xp6(1),n.hij(" ",d.label," ")}}let u=class{constructor(_,d){this.formBuilder=_,this.activeModal=d,this.asset=void 0,this.form=this.formBuilder.group({}),this.assetTypeOptions=b.wA}ngOnInit(){var _,d;this.buildForm(),null===(_=this.form.get("isCountUndefined"))||void 0===_||_.valueChanges.pipe((0,x.b)(0),(0,F.t)(this)).subscribe(v=>{const Z=this.form.value.count;v&&void 0!==Z&&this.form.patchValue({count:void 0}),!v&&null==Z&&this.form.patchValue({count:0})}),null===(d=this.form.get("count"))||void 0===d||d.valueChanges.pipe((0,x.b)(0),(0,F.t)(this)).subscribe(v=>{void 0!==v&&this.form.value.isCountUndefined&&this.form.patchValue({isCountUndefined:!1})})}buildForm(){var _,d,v,Z;this.form=this.formBuilder.group({description:[(null===(_=this.asset)||void 0===_?void 0:_.description)||"",e.kI.required],count:[(null===(d=this.asset)||void 0===d?void 0:d.count)||void 0],isCountUndefined:[void 0===(null===(v=this.asset)||void 0===v?void 0:v.count)],type:[(null===(Z=this.asset)||void 0===Z?void 0:Z.type)||b.h3.Technic,e.kI.required]})}onCancel(){this.activeModal.dismiss()}onSubmit(){var _,d,v,Z,B,I,E,J;if(null===(_=this.form)||void 0===_?void 0:_.valid){const R={id:(null===(d=this.asset)||void 0===d?void 0:d.id)||void 0,description:null===(Z=null===(v=this.form)||void 0===v?void 0:v.value)||void 0===Z?void 0:Z.description,count:null===(I=null===(B=this.form)||void 0===B?void 0:B.value)||void 0===I?void 0:I.count,type:null===(J=null===(E=this.form)||void 0===E?void 0:E.value)||void 0===J?void 0:J.type};this.activeModal.close(R)}}isNewAsset(){return!this.asset||!(0,O.s)(this.asset)}};u.\u0275fac=function(_){return new(_||u)(n.Y36(e.qu),n.Y36(c.Kz))},u.\u0275cmp=n.Xpm({type:u,selectors:[["app-asset-form"]],inputs:{asset:"asset"},decls:31,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],["novalidate","",3,"formGroup"],["for","asset-description"],["id","asset-description","formControlName","description",1,"form-control","ml-1"],["for","asset-type"],["formControlName","type","id","asset-type",1,"form-control","ml-1"],[3,"value",4,"ngFor","ngForOf"],["for","asset-count"],["type","checkbox","formControlName","isCountUndefined"],["type","number","id","asset-count","formControlName","count",1,"form-control","ml-1"],[1,"modal-footer"],["type","button",1,"btn","btn-link",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"value"]],template:function(_,d){1&_&&(n.TgZ(0,"div",0),n.TgZ(1,"h4",1),n.TgZ(2,"span"),n._uU(3," \u0410\u043a\u0442\u0438\u0432 "),n.qZA(),n.qZA(),n.qZA(),n.TgZ(4,"div",2),n.TgZ(5,"form",3),n.TgZ(6,"div"),n.TgZ(7,"h5"),n.TgZ(8,"label",4),n._uU(9,"\u041e\u043f\u0438\u0441"),n.qZA(),n.qZA(),n._UZ(10,"textarea",5),n.qZA(),n.TgZ(11,"div"),n.TgZ(12,"h5"),n.TgZ(13,"label",6),n._uU(14,"\u0422\u0438\u043f"),n.qZA(),n.qZA(),n.TgZ(15,"select",7),n.YNc(16,q,2,2,"option",8),n.qZA(),n.qZA(),n.TgZ(17,"div"),n.TgZ(18,"h3"),n.TgZ(19,"label",9),n._uU(20,"\u041a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c"),n.qZA(),n.qZA(),n.TgZ(21,"div"),n._UZ(22,"input",10),n.TgZ(23,"span"),n._uU(24,"\u041d\u0435\u0432\u0456\u0434\u043e\u043c\u043e"),n.qZA(),n.qZA(),n._UZ(25,"input",11),n.qZA(),n.qZA(),n.qZA(),n.TgZ(26,"div",12),n.TgZ(27,"button",13),n.NdJ("click",function(){return d.onCancel()}),n._uU(28," \u0432\u0456\u0434\u0431\u0456\u0439 "),n.qZA(),n.TgZ(29,"button",14),n.NdJ("click",function(){return d.onSubmit()}),n._uU(30),n.qZA(),n.qZA()),2&_&&(n.xp6(5),n.Q6J("formGroup",d.form),n.xp6(11),n.Q6J("ngForOf",d.assetTypeOptions),n.xp6(13),n.Q6J("disabled",!d.form.valid),n.xp6(1),n.hij(" ",d.isNewAsset()?"\u0414\u043e\u0434\u0430\u0442\u0438":"\u0417\u043c\u0456\u043d\u0438\u0442\u0438"," "))},directives:[e._Y,e.JL,e.sg,e.Fj,e.JJ,e.u,e.EJ,P.sg,e.Wl,e.wV,e.YN,e.Kr],styles:[""],changeDetection:0}),u=(0,g.gn)([(0,F.c)()],u);var i=a(7319),h=a(561),f=a(1135),A=a(4004),S=a(9841),D=a(5698),k=(()=>{return(y=k||(k={}))[y.None=0]="None",y[y.Entities=1]="Entities",k;var y})();function j(y){return function(d,v){const Z={entities:Object.assign({},v.entities)};return y(d,Z)===k.Entities?Object.assign(Object.assign({},v),{entities:Z.entities}):v}}function $(y,_){return!(!_||!_.entities[y])}var r=a(1829);function T(y,_){if(1&y){const d=n.EpF();n.TgZ(0,"app-asset-view",10),n.NdJ("click",function(){const B=n.CHM(d).$implicit,I=n.oxw().ngIf;return n.oxw().select(B.id,!!I[B.id])}),n.qZA()}if(2&y){const d=_.$implicit,v=n.oxw().ngIf;n.ekj("selected",v[d.id]),n.Q6J("asset",d)}}function p(y,_){if(1&y&&(n.TgZ(0,"div"),n.YNc(1,T,1,3,"app-asset-view",9),n.ALo(2,"async"),n.qZA()),2&y){const d=n.oxw();n.xp6(1),n.Q6J("ngForOf",n.lcZ(2,1,d.assets$))}}let C=(()=>{class y{constructor(d,v){this.activeModal=d,this.store=v,this.selectedAdapter=function z(y){const _=function G(){return{getInitialState:function y(_={}){return Object.assign({entities:{}},_)}}}(),d=function Y(){return{getSelectors:function y(_){const d=B=>B.entities,v=(0,i.P1)(d,B=>Object.keys(B)),Z=(0,i.P1)(v,B=>B.length);return _?{selectIds:(0,i.P1)(_,v),selectEntities:(0,i.P1)(_,d),selectTotal:(0,i.P1)(_,Z)}:{selectIds:v,selectEntities:d,selectTotal:Z}}}}(),v=function V(){function y(I,E){return I in E.entities?k.None:(E.entities[I]=!0,k.Entities)}function Z(I,E){let J=!1;for(const R of I)R in E.entities&&(delete E.entities[R],J=!0);return J?k.Entities:k.None}return{addOne:j(y),addMany:j(function _(I,E){let J=k.None;for(const R of I)J=y(R,E)||J;return J}),addAll:j(function d(I,E){return E.entities=I.reduce((J,R)=>(J[R]=!0,J),{}),k.Entities}),removeOne:j(function v(I,E){return Z([I],E)}),removeMany:j(Z),removeAll:function B(I){return Object.assign({},I,{entities:{}})}}}();return Object.assign(Object.assign(Object.assign(Object.assign({},_),d),v),{hasId:$})}(),this.selectedSelectors=this.selectedAdapter.getSelectors(),this.selectedState$=new f.X(this.selectedAdapter.getInitialState()),this.selected$=this.selectedState$.pipe((0,A.U)(this.selectedSelectors.selectEntities)),this.selectedIds$=this.selectedState$.pipe((0,A.U)(this.selectedSelectors.selectIds)),this.assets$=this.store.pipe((0,i.Ys)(h.q.selectAssetsAll))}ngOnInit(){}onCancel(){this.activeModal.dismiss()}onSubmit(){(0,S.a)([this.store.pipe((0,i.Ys)(h.q.selectAssetsEntities)),this.selectedIds$]).pipe((0,D.q)(1)).subscribe(([d,v])=>{this.activeModal.close(v.map(Z=>d[Z]))})}select(d,v){let Z=this.selectedState$.value;Z=v?this.selectedAdapter.removeOne(d,Z):this.selectedAdapter.addOne(d,Z),this.selectedState$.next(Z)}}return y.\u0275fac=function(d){return new(d||y)(n.Y36(c.Kz),n.Y36(i.yh))},y.\u0275cmp=n.Xpm({type:y,selectors:[["app-select-asset-modal"]],decls:16,vars:6,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[1,"text-secondary"],[1,"items-list"],[4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-link",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"asset","selected","click",4,"ngFor","ngForOf"],[3,"asset","click"]],template:function(d,v){if(1&d&&(n.TgZ(0,"div",0),n.TgZ(1,"h4",1),n.TgZ(2,"span"),n._uU(3," \u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0410\u043a\u0442\u0438\u0432\u0438 "),n.qZA(),n.qZA(),n.qZA(),n.TgZ(4,"div",2),n.TgZ(5,"h6",3),n._uU(6,"\u043c\u043e\u0436\u043d\u0430 \u043e\u0431\u0440\u0430\u0442\u0438 \u043e\u0434\u0438\u043d \u0430\u0431\u043e \u043a\u0456\u043b\u044c\u043a\u0430 \u0430\u043a\u0442\u0438\u0432\u0456\u0432"),n.qZA(),n.TgZ(7,"div",4),n.YNc(8,p,3,3,"div",5),n.ALo(9,"async"),n.qZA(),n.qZA(),n.TgZ(10,"div",6),n.TgZ(11,"button",7),n.NdJ("click",function(){return v.onCancel()}),n._uU(12," \u0432\u0456\u0434\u0431\u0456\u0439 "),n.qZA(),n.TgZ(13,"button",8),n.NdJ("click",function(){return v.onSubmit()}),n.ALo(14,"async"),n._uU(15," \u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 "),n.qZA(),n.qZA()),2&d){let Z;n.xp6(8),n.Q6J("ngIf",n.lcZ(9,2,v.selected$)),n.xp6(5),n.Q6J("disabled",!(null!=(Z=n.lcZ(14,4,v.selectedIds$))&&Z.length))}},directives:[P.O5,P.sg,r.F],pipes:[P.Ov],styles:[".selected[_ngcontent-%COMP%]{background-color:#0d6efd}.items-list[_ngcontent-%COMP%]{max-height:400px;overflow:auto}"],changeDetection:0}),y})(),Q=(()=>{class y{constructor(d){this.modalService=d,this.openedModal=null}addAsset(){var d;return null===(d=this.openedModal)||void 0===d||d.close(),this.openedModal=this.modalService.open(u,{keyboard:!1,backdrop:"static",size:"lg"}),(0,t.D)(this.openedModal.result)}editAsset(d){var v;return null===(v=this.openedModal)||void 0===v||v.close(),this.openedModal=this.modalService.open(u,{keyboard:!1,backdrop:"static",size:"lg"}),this.openedModal.componentInstance.asset=Object.assign({},d),(0,t.D)(this.openedModal.result)}selectAsset(){var d;return null===(d=this.openedModal)||void 0===d||d.close(),this.openedModal=this.modalService.open(C,{keyboard:!1,backdrop:"static",size:"lg"}),(0,t.D)(this.openedModal.result)}}return y.\u0275fac=function(d){return new(d||y)(n.LFG(c.FF))},y.\u0275prov=n.Yz7({token:y,factory:y.\u0275fac,providedIn:"root"}),y})()},543:(X,U,a)=>{"use strict";a.d(U,{W:()=>$});var t=a(5e3),g=a(7213),e=a(9808),O=a(808);let F=(()=>{class r{constructor(p,C){this.el=p,this.toastsService=C,this.value=void 0,this.successMessage=void 0,this.hiddenTextArea=null}onClick(){this.init(),this.select(),this.notify(),this.destroy()}ngOnInit(){this.el.nativeElement.setAttribute("style","cursor: pointer")}init(){this.hiddenTextArea=document.createElement("textarea"),this.hiddenTextArea.setAttribute("readonly",""),this.hiddenTextArea.className="",this.hiddenTextArea.value=this.value||"",this.hiddenTextArea.className="copy-to-clipboard-hidden-element",document.body.appendChild(this.hiddenTextArea)}select(){var p;null===(p=this.hiddenTextArea)||void 0===p||p.select(),document.execCommand("copy")}notify(){this.successMessage&&this.toastsService.success(this.successMessage)}destroy(){this.hiddenTextArea&&(document.body.removeChild(this.hiddenTextArea),this.hiddenTextArea=null)}}return r.\u0275fac=function(p){return new(p||r)(t.Y36(t.SBq),t.Y36(O.kl))},r.\u0275dir=t.lG2({type:r,selectors:[["","drsClipboard",""]],hostBindings:function(p,C){1&p&&t.NdJ("click",function(){return C.onClick()})},inputs:{value:"value",successMessage:"successMessage"}}),r})();function x(r,T){if(1&r&&(t.TgZ(0,"span",2),t._uU(1),t.TgZ(2,"span",3),t._uU(3,"\u0441\u043a\u043e\u043f\u0456\u044e\u0432\u0430\u0442\u0438"),t.qZA(),t.qZA()),2&r){const p=t.oxw();t.Q6J("value",p.getCoordinatesString())("successMessage","\u0421\u043a\u043e\u043f\u0456\u0439\u043e\u0432\u0430\u043d\u043e"),t.xp6(1),t.lnq(" ",p.coord[1],"\xa0",p.coord[0],"\xa0",p.coord[2]," ")}}function n(r,T){1&r&&t._uU(0,"\u043d\u0435\u0432\u0456\u0434\u043e\u043c\u043e")}let c=(()=>{class r{constructor(){this.coord=void 0}ngOnInit(){}getCoordinatesString(){return this.coord?function b(r){if(null==r?void 0:r.length){let T=`${r[1]} ${r[0]}`;return r[2]?T+" "+r[2]:T}return""}(this.coord):""}}return r.\u0275fac=function(p){return new(p||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-geo-coordinates"]],inputs:{coord:"coord"},decls:3,vars:2,consts:[["drsClipboard","",3,"value","successMessage",4,"ngIf","ngIfElse"],["noCoordinates",""],["drsClipboard","",3,"value","successMessage"],[1,"text-secondary","size-xs"]],template:function(p,C){if(1&p&&(t.YNc(0,x,4,5,"span",0),t.YNc(1,n,1,0,"ng-template",null,1,t.W1O)),2&p){const Q=t.MAs(2);t.Q6J("ngIf",C.coord)("ngIfElse",Q)}},directives:[e.O5,F],styles:["[_nghost-%COMP%]{overflow:hidden;white-space:normal;text-overflow:ellipsis;word-break:break-all}"],changeDetection:0}),r})();function P(r,T){if(1&r&&(t.TgZ(0,"div"),t._UZ(1,"app-asset-movement-short",2),t.qZA()),2&r){const p=t.oxw();t.xp6(1),t.Q6J("geo",p.asFeature().geometry)("selectedPosition",p.selectedPosition)}}function q(r,T){if(1&r&&(t.TgZ(0,"div"),t._UZ(1,"app-geo-coordinates",4),t.qZA()),2&r){const p=T.$implicit,C=t.oxw(2);t.xp6(1),t.ekj("selected",C.isSelected(p)),t.Q6J("coord",p)}}function u(r,T){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,q,2,3,"div",3),t.qZA()),2&r){const p=t.oxw();let C;t.xp6(1),t.Q6J("ngForOf",null==(C=p.asMultiPoint())?null:C.coordinates)}}function i(r,T){if(1&r&&(t.TgZ(0,"div"),t._UZ(1,"app-geo-coordinates",4),t.qZA()),2&r){const p=T.$implicit;t.xp6(1),t.Q6J("coord",p)}}function h(r,T){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,i,2,1,"div",3),t.qZA()),2&r){const p=T.$implicit;t.xp6(1),t.Q6J("ngForOf",p)}}function f(r,T){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,h,2,1,"div",3),t.qZA()),2&r){const p=t.oxw();let C;t.xp6(1),t.Q6J("ngForOf",null==(C=p.asPolygon())?null:C.coordinates)}}function A(r,T){if(1&r&&(t.TgZ(0,"div"),t._UZ(1,"app-geo-coordinates",4),t.qZA()),2&r){const p=T.$implicit;t.xp6(1),t.Q6J("coord",p)}}function S(r,T){if(1&r&&(t.TgZ(0,"div"),t.YNc(1,A,2,1,"div",3),t.qZA()),2&r){const p=t.oxw();let C;t.xp6(1),t.Q6J("ngForOf",null==(C=p.asLineString())?null:C.coordinates)}}let D=(()=>{class r{constructor(){this.GeoJsonType=g.jN,this.geo=void 0}ngOnInit(){}asFeature(){return null==this?void 0:this.geo}asMultiPoint(){return null==this?void 0:this.geo}asLineString(){return null==this?void 0:this.geo}asPolygon(){return null==this?void 0:this.geo}isSelected(p){return!!this.selectedPosition&&p[0]===this.selectedPosition[0]&&p[1]===this.selectedPosition[1]}}return r.\u0275fac=function(p){return new(p||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-asset-movement-short"]],inputs:{geo:"geo",selectedPosition:"selectedPosition"},decls:5,vars:5,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"geo","selectedPosition"],[4,"ngFor","ngForOf"],[3,"coord"]],template:function(p,C){1&p&&(t.TgZ(0,"div",0),t.YNc(1,P,2,2,"div",1),t.YNc(2,u,2,1,"div",1),t.YNc(3,f,2,1,"div",1),t.YNc(4,S,2,1,"div",1),t.qZA()),2&p&&(t.Q6J("ngSwitch",null==C.geo?null:C.geo.type),t.xp6(1),t.Q6J("ngSwitchCase",C.GeoJsonType.Feature),t.xp6(1),t.Q6J("ngSwitchCase",C.GeoJsonType.MultiPoint),t.xp6(1),t.Q6J("ngSwitchCase",C.GeoJsonType.Polygon),t.xp6(1),t.Q6J("ngSwitchCase",C.GeoJsonType.LineString))},directives:[e.RF,e.n9,r,e.sg,c],styles:[".selected[_ngcontent-%COMP%]{background-color:#198754aa}"],changeDetection:0}),r})();var N=a(3897),G=a(8010);function Y(r,T){1&r&&(t.ynx(0),t._uU(1,"\u0434\u043e \u0442\u0435\u043f\u0435\u0440"),t.BQk())}function k(r,T){if(1&r&&(t._uU(0),t.ALo(1,"date")),2&r){const p=t.oxw(2);t.Oqu(t.Dn7(1,1,p.date,p.DateTimeFormatShort,p.UkraineTimeZone))}}function j(r,T){if(1&r&&(t.TgZ(0,"span"),t.YNc(1,Y,2,0,"ng-container",0),t.YNc(2,k,2,5,"ng-template",null,2,t.W1O),t.qZA()),2&r){const p=t.MAs(3),C=t.oxw();t.xp6(1),t.Q6J("ngIf",C.isTillToday())("ngIfElse",p)}}function V(r,T){1&r&&(t.TgZ(0,"span"),t._uU(1,"\u0434\u0430\u043d\u0438\u0445 \u043d\u0435\u043c\u0430"),t.qZA())}let z=(()=>{class r{constructor(){this.date=void 0,this.UkraineTimeZone=N.wy,this.DateTimeFormatShort=N.Ap}ngOnInit(){}isTillToday(){return(0,G.c)(this.date)}}return r.\u0275fac=function(p){return new(p||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-data-time"]],inputs:{date:"date"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["undef",""],["definedData",""]],template:function(p,C){if(1&p&&(t.YNc(0,j,4,2,"span",0),t.YNc(1,V,2,0,"ng-template",null,1,t.W1O)),2&p){const Q=t.MAs(2);t.Q6J("ngIf",!!C.date)("ngIfElse",Q)}},directives:[e.O5],pipes:[e.uU],styles:[""],changeDetection:0}),r})(),$=(()=>{class r{constructor(){this.showOnMap=new t.vpe}ngOnInit(){}}return r.\u0275fac=function(p){return new(p||r)},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-asset-movement"]],inputs:{movement:"movement",selectedPosition:"selectedPosition"},outputs:{showOnMap:"showOnMap"},decls:10,vars:5,consts:[[1,"p-1","col-12"],[1,"row","m-0"],[1,"p-1","text-secondary","col-md-6"],[3,"geo","selectedPosition"],[1,"p-1","col-md-6"],[3,"date"]],template:function(p,C){1&p&&(t.TgZ(0,"div",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t._UZ(4,"app-asset-movement-short",3),t.qZA(),t.TgZ(5,"div",4),t._UZ(6,"app-data-time",5),t.TgZ(7,"span"),t._uU(8,"\xa0-\xa0"),t.qZA(),t._UZ(9,"app-data-time",5),t.qZA(),t.qZA()),2&p&&(t.xp6(1),t.hij(" ",null==C.movement?null:C.movement.description,"\n"),t.xp6(3),t.Q6J("geo",null==C.movement?null:C.movement.geo)("selectedPosition",C.selectedPosition),t.xp6(2),t.Q6J("date",null==C.movement?null:C.movement.start),t.xp6(3),t.Q6J("date",null==C.movement?null:C.movement.end))},directives:[D,z],styles:[""],changeDetection:0}),r})()},4741:(X,U,a)=>{"use strict";a.d(U,{Y:()=>n});var t=a(9808),g=a(5e3);let e=(()=>{class c{}return c.\u0275fac=function(q){return new(q||c)},c.\u0275mod=g.oAB({type:c}),c.\u0275inj=g.cJS({imports:[[t.ez]]}),c})(),b=(()=>{class c{}return c.\u0275fac=function(q){return new(q||c)},c.\u0275mod=g.oAB({type:c}),c.\u0275inj=g.cJS({imports:[[t.ez]]}),c})(),O=(()=>{class c{}return c.\u0275fac=function(q){return new(q||c)},c.\u0275mod=g.oAB({type:c}),c.\u0275inj=g.cJS({imports:[[t.ez,b]]}),c})(),F=(()=>{class c{}return c.\u0275fac=function(q){return new(q||c)},c.\u0275mod=g.oAB({type:c}),c.\u0275inj=g.cJS({imports:[[t.ez,O]]}),c})(),x=(()=>{class c{}return c.\u0275fac=function(q){return new(q||c)},c.\u0275mod=g.oAB({type:c}),c.\u0275inj=g.cJS({imports:[[t.ez]]}),c})(),n=(()=>{class c{}return c.\u0275fac=function(q){return new(q||c)},c.\u0275mod=g.oAB({type:c}),c.\u0275inj=g.cJS({imports:[[t.ez,e,F,x]]}),c})()},1829:(X,U,a)=>{"use strict";a.d(U,{F:()=>e});var t=a(5092),g=a(5e3);let e=(()=>{class b{constructor(){}ngOnInit(){}getAssetLabel(F){return!!F&&t.vb[F]||""}isCountUnknown(F){return null==F}}return b.\u0275fac=function(F){return new(F||b)},b.\u0275cmp=g.Xpm({type:b,selectors:[["app-asset-view"]],inputs:{asset:"asset"},decls:7,vars:3,consts:[[1,"row"],[1,"col-sm-8","col-md-9","p-1"],[1,"col-sm-4","col-md-3","p-1"],[1,"col-sm-6","p-1"]],template:function(F,x){1&F&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g._uU(2),g.qZA(),g.TgZ(3,"div",2),g._uU(4),g.qZA(),g.TgZ(5,"div",3),g._uU(6),g.qZA(),g.qZA()),2&F&&(g.xp6(2),g.hij(" ",null==x.asset?null:x.asset.description," "),g.xp6(2),g.Oqu(x.getAssetLabel(null==x.asset?null:x.asset.type)),g.xp6(2),g.Oqu(x.isCountUnknown(null==x.asset?null:x.asset.count)?"\u043a\u0456\u043b\u044c\u043a\u0456\u0441\u0442\u044c \u043d\u0435\u0432\u0456\u0434\u043e\u043c\u0430":null==x.asset?null:x.asset.count))},styles:["[_nghost-%COMP%]{display:block}.row[_ngcontent-%COMP%]{margin:0}"],changeDetection:0}),b})()},8796:(X,U,a)=>{"use strict";a.d(U,{o:()=>e});var t=a(9808),g=a(5e3);let e=(()=>{class b{}return b.\u0275fac=function(F){return new(F||b)},b.\u0275mod=g.oAB({type:b}),b.\u0275inj=g.cJS({imports:[[t.ez]]}),b})()},7213:(X,U,a)=>{"use strict";a.d(U,{S0:()=>b,c7:()=>e,jN:()=>t,k5:()=>g});var t=(()=>{return(O=t||(t={})).MultiPoint="MultiPoint",O.LineString="LineString",O.Polygon="Polygon",O.Feature="Feature",O.MultiPolygon="MultiPolygon",O.GeometryCollection="GeometryCollection",t;var O})();const g={type:t.MultiPoint,label:"\u041a\u043e\u043e\u0440\u0434\u0438\u043d\u0430\u0442\u0438"},e={type:t.LineString,label:"\u041b\u0456\u043d\u0456\u044f"},b={type:t.Polygon,label:"\u041f\u043e\u043b\u0456\u0433\u043e\u043d"}},9792:(X,U,a)=>{"use strict";a.d(U,{a:()=>st});var t=a(457),g=a(5815),e=a(5e3),b=a(9889),O=a(7319),F=a(655),x=a(4987),n=a(2382);function c(m,o){if(o.length<m)throw new TypeError(m+" argument"+(m>1?"s":"")+" required, but only "+o.length+" present")}function P(m){c(1,arguments);var o=Object.prototype.toString.call(m);return m instanceof Date||"object"==typeof m&&"[object Date]"===o?new Date(m.getTime()):"number"==typeof m||"[object Number]"===o?new Date(m):(("string"==typeof m||"[object String]"===o)&&"undefined"!=typeof console&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}var C,u=a(8010),i=a(3897),h=a(8407),A=(a(7637),a(2937)),S=a(1135),D=a(7579),N=a(5698),G=a(9300),Y=a(3900),k=a(9841),j=a(4004),V=a(1365),z=a(7213),$=a(9761),r=a(1359),T=a(9808),p=a(8372);let Q=C=class extends $.H{constructor(o,s){super(s),this.formBuilder=o,this.form=this.formBuilder.group({}),this.submitChange$=new D.x}ngOnInit(){this.buildForm(),this.submitChange$.pipe((0,p.b)(10),(0,x.t)(this)).subscribe(()=>{this.form.valid&&(this.value=function _(m){const o=m.split(/[,\s]+/);if(2===o.length)return{lat:Number.parseFloat(o[0]),lng:Number.parseFloat(o[1])}}(this.form.value.latlng))})}buildForm(){this.form=this.formBuilder.group({latlng:[y(this.value),n.kI.required]})}onSubmit(){this.submitChange$.next()}writeValue(o){super.writeValue(o),this.form.patchValue({latlng:y(this.value)})}};function y(m){return m?`${m.lat} ${m.lng}`:""}var d;Q.\u0275fac=function(o){return new(o||Q)(e.Y36(n.qu),e.Y36(e.sBO))},Q.\u0275cmp=e.Xpm({type:Q,selectors:[["app-lat-lng-edit"]],features:[e._Bn([{provide:n.JU,useExisting:(0,e.Gpc)(()=>C),multi:!0}]),e.qOj],decls:4,vars:1,consts:[["novalidate","",1,"d-flex","flex-row",3,"formGroup","ngSubmit","keyup.enter"],["type","text","formControlName","latlng",1,"form-control","m-1","flex-grow-1",3,"blur"],[1,"btn","btn-link",3,"click"]],template:function(o,s){1&o&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return s.onSubmit()})("keyup.enter",function(){return s.onSubmit()}),e.TgZ(1,"input",1),e.NdJ("blur",function(){return s.onSubmit()}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return s.onSubmit()}),e._uU(3,"\u0437\u043c\u0456\u043d\u0438\u0442\u0438"),e.qZA(),e.qZA()),2&o&&e.Q6J("formGroup",s.form)},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u],styles:[""],changeDetection:0}),Q=C=(0,F.gn)([(0,x.c)()],Q);const v=["map"];function Z(m,o){if(1&m&&(e.TgZ(0,"option",10),e._uU(1),e.qZA()),2&m){const s=o.$implicit;e.Q6J("value",s.type),e.xp6(1),e.hij(" ",s.label," ")}}function B(m,o){if(1&m){const s=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"app-lat-lng-edit",12),e.NdJ("ngModelChange",function(M){const H=e.CHM(s).index;return e.oxw().changeMarker(M,H)}),e.qZA(),e.TgZ(2,"button",13),e.NdJ("click",function(){const w=e.CHM(s).index;return e.oxw().removeMarker(w)}),e._uU(3,"X"),e.qZA(),e.qZA()}if(2&m){const s=o.$implicit;e.xp6(1),e.Q6J("ngModel",s)}}const I={radius:3,fillColor:"#ff7800",color:"#000",weight:1,opacity:1,fillOpacity:.8};let E=d=class extends $.H{constructor(o){super(o),this.geoValue$=new S.X(W(z.jN.MultiPoint,[])),this.geoType$=this.geoValue$.pipe((0,j.U)(s=>{var l;return null===(l=null==s?void 0:s.geometry)||void 0===l?void 0:l.type})),this.markerCoordinates$=this.geoValue$.pipe((0,j.U)(s=>!!s&&function nt(m){var o;switch(null===(o=null==m?void 0:m.geometry)||void 0===o?void 0:o.type){case"LineString":case"MultiPoint":return m.geometry.coordinates.map(R);case"Polygon":return m.geometry.coordinates[0].map(R)}return[]}(s)||[])),this.map$=new S.X(null),this.geoJsonLayer$=new S.X(null),this.markers$=new S.X([]),this.reloadMarkers$=new D.x,this.arrowHeadsLayer$=new S.X([]),this.arrowHeadsLines$=this.geoValue$.pipe((0,j.U)(s=>(0,r.UW)([s]))),this.geoTypeOptions=[z.k5,z.c7,z.S0]}setGeoType(o){this.markerCoordinates$.pipe((0,N.q)(1)).subscribe(s=>{const l=W(o,s.map(J));l&&this.geoValue$.next(l)})}ngOnInit(){this.map$.pipe((0,G.h)(o=>!!o),(0,Y.w)(o=>(0,k.a)([this.markerCoordinates$,this.markers$]).pipe((0,j.U)(([s,l])=>({coordinates:s,markers:l,mapObj:o})))),(0,x.t)(this)).subscribe(({coordinates:o,markers:s,mapObj:l})=>{if(l)if(s.length!==o.length)if(s.length<o.length){const M=Array.from(Array(o.length-s.length)).map(()=>this.createMarker(l));this.markers$.next([...s,...M])}else s.slice(o.length).forEach(M=>{M.remove()}),this.markers$.next(s.slice(0,o.length));else o.forEach((M,w)=>{s[w].setLatLng(M)})}),this.reloadMarkers$.pipe((0,V.M)(this.markers$,this.geoType$),(0,x.t)(this)).subscribe(([,o,s])=>{const l=W(s,o.map(et));l&&this.geoValue$.next(l)}),this.map$.pipe((0,G.h)(o=>!!o),(0,Y.w)(o=>this.markerCoordinates$),(0,N.q)(1)).subscribe(o=>{(null==o?void 0:o.length)||(this.addMarker(),this.changeDetectorRef.detectChanges())}),this.map$.pipe((0,G.h)(o=>!!o),(0,Y.w)(()=>this.geoValue$),(0,V.M)(this.geoJsonLayer$),(0,x.t)(this)).subscribe(([o,s])=>{null==s||s.clearLayers(),o&&(null==s||s.addData(o),this.value=o,this.touch(),this.changeDetectorRef.markForCheck())}),this.map$.pipe((0,G.h)(o=>!!o),(0,Y.w)(o=>(0,k.a)([this.arrowHeadsLines$,this.arrowHeadsLayer$]).pipe((0,j.U)(([s,l])=>({lines:s,heads:l,mapObj:o})))),(0,x.t)(this)).subscribe(({lines:o,heads:s,mapObj:l})=>{if(l)if(s.length!==o.length)if(s.length<o.length){const M=Array.from(Array(o.length-s.length)).map((w,H)=>(0,r.Cl)(l));this.arrowHeadsLayer$.next([...s,...M])}else s.slice(o.length).forEach(M=>{M.remove()}),this.arrowHeadsLayer$.next(s.slice(0,o.length));else o.forEach((M,w)=>{s[w].setPaths(M)})})}ngAfterViewInit(){var o;const s=h.map(null===(o=this.mapElement)||void 0===o?void 0:o.nativeElement).setView(A.E,A.T);h.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,minZoom:3,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(s);const M=h.geoJSON(void 0,{pointToLayer:(w,H)=>h.circleMarker(H,I),onEachFeature(w,H){}});M.setStyle(w=>({color:(null==w?void 0:w.properties.color)||"#ffffff"})),this.geoJsonLayer$.next(M),M.addTo(s),this.map$.next(s)}addMarker(){this.markerCoordinates$.pipe((0,N.q)(1),(0,V.M)(this.geoType$,this.map$)).subscribe(([o,s,l])=>{if(l){const M=W(s,[...o.map(J),J(l.getCenter())]);M&&this.geoValue$.next(M)}})}recreateMarkers(){this.geoType$.pipe((0,N.q)(1),(0,V.M)(this.map$)).subscribe(([o,s])=>{if(s){const l=W(o,[J(s.getCenter())]);l&&this.geoValue$.next(l)}})}changeMarker(o,s){this.markerCoordinates$.pipe((0,N.q)(1),(0,V.M)(this.geoType$,this.map$)).subscribe(([l,M,w])=>{if(w){(l=[...l])[s]=o;const H=W(M,l.map(J));H&&this.geoValue$.next(H)}})}removeMarker(o){this.markerCoordinates$.pipe((0,N.q)(1),(0,V.M)(this.geoType$,this.map$)).subscribe(([s,l,M])=>{if(M){(s=[...s]).splice(o,1);const w=W(l,s.map(J));w&&this.geoValue$.next(w)}})}createMarker(o){const s=h.marker(o.getCenter(),{draggable:!0,autoPan:!0}).addTo(o);return s.on("dragend",l=>{this.reloadMarkers()}),s}reloadMarkers(){this.reloadMarkers$.next()}writeValue(o){this.geoValue$.next(o),super.writeValue(o)}};function J(m){return[m.lng,m.lat]}function R(m){return{lat:m[1],lng:m[0]}}function et(m){return J(m.getLatLng())}function W(m,o){switch(m){case"LineString":return{type:"Feature",geometry:{type:"LineString",coordinates:o},properties:{}};case"Polygon":return{type:"Feature",geometry:{type:"Polygon",coordinates:[o]},properties:{}};default:return{type:"Feature",geometry:{type:"MultiPoint",coordinates:o},properties:{}}}return null}E.\u0275fac=function(o){return new(o||E)(e.Y36(e.sBO))},E.\u0275cmp=e.Xpm({type:E,selectors:[["app-map-selection-view"]],viewQuery:function(o,s){if(1&o&&e.Gf(v,5),2&o){let l;e.iGM(l=e.CRH())&&(s.mapElement=l.first)}},features:[e._Bn([{provide:n.JU,useExisting:(0,e.Gpc)(()=>d),multi:!0}]),e.qOj],decls:14,vars:7,consts:[[1,"form-control","ml-1","my-2",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"my-2"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-outline-warning",3,"click"],["class","d-flex flex-row",4,"ngFor","ngForOf"],[1,"map-container"],[1,"map-frame"],[1,"map"],["map",""],[3,"value"],[1,"d-flex","flex-row"],[1,"flex-grow-1",3,"ngModel","ngModelChange"],[1,"btn","btn-outline-secondary",3,"click"]],template:function(o,s){1&o&&(e.TgZ(0,"select",0),e.NdJ("ngModelChange",function(M){return s.setGeoType(M)}),e.ALo(1,"async"),e.YNc(2,Z,2,2,"option",1),e.qZA(),e.TgZ(3,"div",2),e.TgZ(4,"button",3),e.NdJ("click",function(){return s.addMarker()}),e._uU(5,"\u0434\u043e\u0434\u0430\u0442\u0438 \u043c\u0430\u0440\u043a\u0435\u0440"),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return s.recreateMarkers()}),e._uU(7,"\u043e\u0447\u0438\u0441\u0442\u0438\u0442\u0438 \u043c\u0430\u0440\u043a\u0435\u0440\u0438"),e.qZA(),e.qZA(),e.YNc(8,B,4,1,"div",5),e.ALo(9,"async"),e.TgZ(10,"div",6),e.TgZ(11,"div",7),e._UZ(12,"div",8,9),e.qZA(),e.qZA()),2&o&&(e.Q6J("ngModel",e.lcZ(1,3,s.geoType$)),e.xp6(2),e.Q6J("ngForOf",s.geoTypeOptions),e.xp6(6),e.Q6J("ngForOf",e.lcZ(9,5,s.markerCoordinates$)))},directives:[n.EJ,n.JJ,n.On,T.sg,n.YN,n.Kr,Q],pipes:[T.Ov],styles:[".map[_ngcontent-%COMP%]{width:100%;height:500px}"],changeDetection:0}),E=d=(0,F.gn)([(0,x.c)()],E);const ot=["startDate"],it=["endDate"];let K=class{constructor(o){this.formBuilder=o,this.form=this.formBuilder.group({}),this.onChange=new e.vpe}ngOnInit(){this.buildForm(),this.form.valueChanges.pipe((0,x.t)(this)).subscribe(o=>{var s;if(this.form.valid){const l=(0,i.wG)(o.startDate,o.startTime)||new Date;let M=(0,i.wG)(o.endDate,o.endTime)||null;M&&function q(m,o){c(2,arguments);var s=P(m),l=P(o);return s.getTime()<l.getTime()}(M,l)&&(M=l);const w={id:this.movement&&(0,g._)(this.movement)?null===(s=this.movement)||void 0===s?void 0:s.id:void 0,description:o.description,start:l.getTime(),end:M?M.getTime():u.w,geo:o.geo};this.onChange.next(w)}})}buildForm(){var o,s,l,M,w,H;this.form=this.formBuilder.group({description:[(null===(o=this.movement)||void 0===o?void 0:o.description)||"",null],startDate:[(0,i.yq)(null===(s=this.movement)||void 0===s?void 0:s.start)||null,n.kI.required],startTime:[(0,i.mr)(null===(l=this.movement)||void 0===l?void 0:l.start)||null],endDate:[(0,i.yq)(null===(M=this.movement)||void 0===M?void 0:M.end)||null],endTime:[(0,i.mr)(null===(w=this.movement)||void 0===w?void 0:w.end)||null],geo:[(null===(H=this.movement)||void 0===H?void 0:H.geo)||void 0,n.kI.required]})}};K.\u0275fac=function(o){return new(o||K)(e.Y36(n.qu))},K.\u0275cmp=e.Xpm({type:K,selectors:[["app-add-edit-movement"]],viewQuery:function(o,s){if(1&o&&(e.Gf(ot,5),e.Gf(it,5)),2&o){let l;e.iGM(l=e.CRH())&&(s.startDate=l.first),e.iGM(l=e.CRH())&&(s.endDate=l.first)}},inputs:{movement:"movement"},outputs:{onChange:"onChange"},decls:27,vars:1,consts:[["novalidate","",3,"formGroup"],[1,"mb-3"],["for","asset-description"],["id","asset-description","formControlName","description",1,"form-control","ml-1"],[1,"d-flex","flex-row"],[1,"flex-grow-0"],["placeholder","\u0440\u0456\u043a-\u043c\u0456\u0441\u044f\u0446-\u0434\u0435\u043d\u044c","formControlName","startDate","type","text","ngbDatepicker","",3,"click"],["startDate","ngbDatepicker"],["placeholder","\u0433\u043e\u0434\u0438\u043d\u0430:\u0445\u0432","formControlName","startTime","type","text"],["placeholder","\u0440\u0456\u043a-\u043c\u0456\u0441\u044f\u0446-\u0434\u0435\u043d\u044c","formControlName","endDate","type","text","ngbDatepicker","",3,"click"],["endDate","ngbDatepicker"],["placeholder","\u0433\u043e\u0434\u0438\u043d\u0430:\u0445\u0432","formControlName","endTime","type","text"],["formControlName","geo"]],template:function(o,s){if(1&o){const l=e.EpF();e.TgZ(0,"form",0),e.TgZ(1,"div",1),e.TgZ(2,"h5"),e.TgZ(3,"label",2),e._uU(4,"\u041e\u043f\u0438\u0441"),e.qZA(),e.qZA(),e._UZ(5,"textarea",3),e.qZA(),e.TgZ(6,"div",1),e.TgZ(7,"div"),e.TgZ(8,"h3"),e._uU(9,"\u043f\u043e\u0447\u0430\u0442\u043e\u043a"),e.qZA(),e.TgZ(10,"div",4),e.TgZ(11,"div",5),e.TgZ(12,"input",6,7),e.NdJ("click",function(){return e.CHM(l),e.MAs(13).toggle()}),e.qZA(),e.qZA(),e.TgZ(14,"div",5),e._UZ(15,"input",8),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div"),e.TgZ(17,"h3"),e._uU(18,"\u0437\u0430\u043a\u0456\u043d\u0447\u0435\u043d\u043d\u044f (\u043e\u043f\u0446\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u043e)"),e.qZA(),e.TgZ(19,"div",4),e.TgZ(20,"div",5),e.TgZ(21,"input",9,10),e.NdJ("click",function(){return e.CHM(l),e.MAs(22).toggle()}),e.qZA(),e.qZA(),e.TgZ(23,"div",5),e._UZ(24,"input",11),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(25,"div"),e._UZ(26,"app-map-selection-view",12),e.qZA(),e.qZA()}2&o&&e.Q6J("formGroup",s.form)},directives:[n._Y,n.JL,n.sg,n.Fj,n.JJ,n.u,b.J4,E],styles:[""],changeDetection:0}),K=(0,F.gn)([(0,x.c)()],K);let tt=(()=>{class m{constructor(s,l){this.activeModal=s,this.store=l,this.movement=void 0}ngOnInit(){}onCancel(){this.activeModal.dismiss()}onSubmit(){this.activeModal.close(this.movement)}onChange(s){this.movement=s}isNewMovement(){return!this.movement||!(0,g._)(this.movement)}}return m.\u0275fac=function(s){return new(s||m)(e.Y36(b.Kz),e.Y36(O.yh))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-movement-form-modal"]],inputs:{movement:"movement"},decls:11,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],[1,"modal-body"],[3,"movement","onChange"],[1,"modal-footer"],["type","button",1,"btn","btn-link",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(s,l){1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"h4",1),e.TgZ(2,"span"),e._uU(3," \u041f\u0435\u0440\u0435\u043c\u0456\u0449\u0435\u043d\u043d\u044f "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"div",2),e.TgZ(5,"app-add-edit-movement",3),e.NdJ("onChange",function(w){return l.onChange(w)}),e.qZA(),e.qZA(),e.TgZ(6,"div",4),e.TgZ(7,"button",5),e.NdJ("click",function(){return l.onCancel()}),e._uU(8," \u0432\u0456\u0434\u0431\u0456\u0439 "),e.qZA(),e.TgZ(9,"button",6),e.NdJ("click",function(){return l.onSubmit()}),e._uU(10),e.qZA(),e.qZA()),2&s&&(e.xp6(5),e.Q6J("movement",l.movement),e.xp6(5),e.hij(" ",l.isNewMovement()?"\u0414\u043e\u0434\u0430\u0442\u0438":"\u0417\u043c\u0456\u043d\u0438\u0442\u0438"," "))},directives:[K],styles:[""],changeDetection:0}),m})(),st=(()=>{class m{constructor(s){this.modalService=s,this.openedModal=null}addMovement(){var s;return null===(s=this.openedModal)||void 0===s||s.close(),this.openedModal=this.modalService.open(tt,{keyboard:!1,backdrop:"static",size:"lg"}),(0,t.D)(this.openedModal.result)}editMovement(s){var l;return null===(l=this.openedModal)||void 0===l||l.close(),this.openedModal=this.modalService.open(tt,{keyboard:!1,backdrop:"static",size:"lg"}),this.openedModal.componentInstance.movement=s,(0,t.D)(this.openedModal.result)}}return m.\u0275fac=function(s){return new(s||m)(e.LFG(b.FF))},m.\u0275prov=e.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},5092:(X,U,a)=>{"use strict";a.d(U,{h3:()=>t,vb:()=>e,wA:()=>g});var t=(()=>{return(b=t||(t={})).Technic="technic",b.Combat="combat",b.Soldiers="soldiers",b.BlockPost="blockpost",b.ExpensiveTech="exptech",b.HQ="hq",t;var b})();const g=[{type:t.Combat,label:"\u0431\u043e\u0439\u043e\u0432\u0456 \u043f\u043e\u0437\u0438\u0446\u0456\u0457"},{type:t.Soldiers,label:"\u041e\u0441\u043e\u0431\u043e\u0432\u0438\u0439 \u0441\u043a\u043b\u0430\u0434"},{type:t.BlockPost,label:"\u0411\u043b\u043e\u043a \u041f\u043e\u0441\u0442"},{type:t.Technic,label:"\u0442\u0435\u0445\u043d\u0456\u043a\u0430"},{type:t.ExpensiveTech,label:"\u0426\u0456\u043d\u043d\u0430 \u0442\u0435\u0445\u043d\u0456\u043a\u0430"},{type:t.HQ,label:"\u0428\u0442\u0430\u0431"}],e=g.reduce((b,O)=>(b[O.type]=O.label,b),{})},8010:(X,U,a)=>{"use strict";a.d(U,{c:()=>g,w:()=>t});const t=Number.MAX_SAFE_INTEGER;function g(e){return e===t}},3897:(X,U,a)=>{"use strict";a.d(U,{Ap:()=>O,U5:()=>b,mr:()=>F,wG:()=>n,wy:()=>e,yq:()=>x});var t=a(8010),g=a(9808);const e="+03:00",b="HH:mm dd-MM-YYYY",O="HH:mm dd/MM";function F(c){return c&&!(0,t.c)(c)?(0,g.p6)(c,"HH:mm","en",e):null}function x(c){return c&&!(0,t.c)(c)?{year:Number.parseInt((0,g.p6)(c,"YYYY","en",e)),day:Number.parseInt((0,g.p6)(c,"dd","en",e)),month:Number.parseInt((0,g.p6)(c,"MM","en",e))}:null}function n(c,P){return c?P?new Date(`${c.year}-${c.month}-${c.day} ${P}:00${e}`):new Date(`${c.year}-${c.month}-${c.day} 00:00${e}`):null}},7637:function(X,U,a){!function(t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;var e=function(i,h){return(180*Math.atan2(h.y-i.y,h.x-i.x)/Math.PI+90+360)%360},b=function(i,h){var f=i.value;return i.isInPixels?f/h:f};function O(u){if("string"==typeof u&&-1!==u.indexOf("%"))return{value:parseFloat(u)/100,isInPixels:!1};var i=u?parseFloat(u):0;return{value:i,isInPixels:i>0}}var u,i,h;function x(u){return u.reduce(function(i,h,f,A){if(f>0&&!function(i,h){return i.x===h.x&&i.y===h.y}(h,A[f-1])){var S=A[f-1],D=i.length>0?i[i.length-1].distB:0,N=function g(u,i){var h=i.x-u.x,f=i.y-u.y;return Math.sqrt(h*h+f*f)}(S,h);i.push({a:S,b:h,distA:D,distB:D+N,heading:e(S,h)})}return i},[])}function c(u,i,h){return i.x!==u.x?{x:u.x+h*(i.x-u.x),y:u.y+h*(i.y-u.y)}:{x:u.x,y:u.y+(i.y-u.y)*h}}u=L.Marker.prototype._initIcon,i=L.Marker.prototype._setPos,h="msTransform"===L.DomUtil.TRANSFORM,L.Marker.addInitHook(function(){var A=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;A&&(A=A[0]+"px "+A[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||A||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",function(S){S.target._applyRotation()})}),L.Marker.include({_initIcon:function(){u.call(this)},_setPos:function(f){i.call(this,f),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,h?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(f){return this.options.rotationAngle=f,this.update(),this},setRotationOrigin:function(f){return this.options.rotationOrigin=f,this.update(),this}}),t.Symbol=t.Symbol||{},t.Symbol.Dash=t.Class.extend({options:{pixelSize:10,pathOptions:{}},initialize:function(i){t.Util.setOptions(this,i),this.options.pathOptions.clickable=!1},buildSymbol:function(i,h,f,A,S){var D=this.options,N=Math.PI/180;if(D.pixelSize<=1)return t.polyline([i.latLng,i.latLng],D.pathOptions);var G=f.project(i.latLng),Y=-(i.heading-90)*N,k=t.point(G.x+D.pixelSize*Math.cos(Y+Math.PI)/2,G.y+D.pixelSize*Math.sin(Y)/2),j=G.add(G.subtract(k));return t.polyline([f.unproject(k),f.unproject(j)],D.pathOptions)}}),t.Symbol.dash=function(u){return new t.Symbol.Dash(u)},t.Symbol.ArrowHead=t.Class.extend({options:{polygon:!0,pixelSize:10,headAngle:60,pathOptions:{stroke:!1,weight:2}},initialize:function(i){t.Util.setOptions(this,i),this.options.pathOptions.clickable=!1},buildSymbol:function(i,h,f,A,S){return this.options.polygon?t.polygon(this._buildArrowPath(i,f),this.options.pathOptions):t.polyline(this._buildArrowPath(i,f),this.options.pathOptions)},_buildArrowPath:function(i,h){var f=Math.PI/180,A=h.project(i.latLng),S=-(i.heading-90)*f,D=this.options.headAngle/2*f,N=S+D,G=S-D,Y=t.point(A.x-this.options.pixelSize*Math.cos(N),A.y+this.options.pixelSize*Math.sin(N)),k=t.point(A.x-this.options.pixelSize*Math.cos(G),A.y+this.options.pixelSize*Math.sin(G));return[h.unproject(Y),i.latLng,h.unproject(k)]}}),t.Symbol.arrowHead=function(u){return new t.Symbol.ArrowHead(u)},t.Symbol.Marker=t.Class.extend({options:{markerOptions:{},rotate:!1},initialize:function(i){t.Util.setOptions(this,i),this.options.markerOptions.clickable=!1,this.options.markerOptions.draggable=!1},buildSymbol:function(i,h,f,A,S){return this.options.rotate&&(this.options.markerOptions.rotationAngle=i.heading+(this.options.angleCorrection||0)),t.marker(i.latLng,this.options.markerOptions)}}),t.Symbol.marker=function(u){return new t.Symbol.Marker(u)};var q=function(i){return Array.isArray(i)&&function(i){return i instanceof t.LatLng||Array.isArray(i)&&2===i.length&&"number"==typeof i[0]}(i[0])};t.PolylineDecorator=t.FeatureGroup.extend({options:{patterns:[]},initialize:function(i,h){t.FeatureGroup.prototype.initialize.call(this),t.Util.setOptions(this,h),this._map=null,this._paths=this._initPaths(i),this._bounds=this._initBounds(),this._patterns=this._initPatterns(this.options.patterns)},_initPaths:function(i,h){var f=this;return q(i)?[h?i.concat([i[0]]):i]:i instanceof t.Polyline?this._initPaths(i.getLatLngs(),i instanceof t.Polygon):Array.isArray(i)?i.reduce(function(S,D){return S.concat(f._initPaths(D,h))},[]):[]},_initPatterns:function(i){return i.map(this._parsePatternDef)},setPatterns:function(i){this.options.patterns=i,this._patterns=this._initPatterns(this.options.patterns),this.redraw()},setPaths:function(i){this._paths=this._initPaths(i),this._bounds=this._initBounds(),this.redraw()},_parsePatternDef:function(i,h){return{symbolFactory:i.symbol,offset:O(i.offset),endOffset:O(i.endOffset),repeat:O(i.repeat)}},onAdd:function(i){this._map=i,this._draw(),this._map.on("moveend",this.redraw,this)},onRemove:function(i){this._map.off("moveend",this.redraw,this),this._map=null,t.FeatureGroup.prototype.onRemove.call(this,i)},_initBounds:function(){var i=this._paths.reduce(function(h,f){return h.concat(f)},[]);return t.latLngBounds(i)},getBounds:function(){return this._bounds},_buildSymbols:function(i,h,f){var A=this;return f.map(function(S,D){return h.buildSymbol(S,i,A._map,D,f.length)})},_getDirectionPoints:function(i,h){var f=this;return i.length<2?[]:function n(u,i){var h=x(u),f=h.length;if(0===f)return[];var A=h[f-1].distB,S=b(i.offset,A),D=b(i.endOffset,A),G=A*b(i.repeat,A),k=D>0?A*D:0,j=[],V=S>0?A*S:0;do{j.push(V),V+=G}while(G>0&&V<A-k);var z=0,$=h[0];return j.map(function(r){for(;r>$.distB&&z<f-1;)z++,$=h[z];return{pt:c($.a,$.b,(r-$.distA)/($.distB-$.distA)),heading:$.heading}})}(i.map(function(S){return f._map.project(S)}),h).map(function(S){return{latLng:f._map.unproject(t.point(S.pt)),heading:S.heading}})},redraw:function(){!this._map||(this.clearLayers(),this._draw())},_getPatternLayers:function(i){var h=this,f=this._map.getBounds().pad(.1);return this._paths.map(function(A){var S=h._getDirectionPoints(A,i).filter(function(D){return f.contains(D.latLng)});return t.featureGroup(h._buildSymbols(A,i.symbolFactory,S))})},_draw:function(){var i=this;this._patterns.map(function(h){return i._getPatternLayers(h)}).forEach(function(h){i.addLayer(t.featureGroup(h))})}}),t.polylineDecorator=function(u,i){return new t.PolylineDecorator(u,i)}}(a(8407))}}]);