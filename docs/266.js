"use strict";(self.webpackChunkmap_observer=self.webpackChunkmap_observer||[]).push([[266],{1266:(Y,p,u)=>{u.r(p),u.d(p,{AddDataModule:()=>L});var m=u(9808),l=u(3477),h=u(3125),Z=u(5782),t=u(5e3),_=u(7319),v=u(1135),i=u(2382),A=u(1886),y=u(8726),T=u(1829),J=u(543);function b(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"div",8),t._UZ(1,"app-asset-view",9),t.TgZ(2,"button",10),t.NdJ("click",function(){const d=t.CHM(o),r=d.$implicit,a=d.index;return t.oxw().removeAsset(r.id,a)}),t._uU(3,"\u043f\u0440\u0438\u0431\u0440\u0430\u0442\u0438"),t.qZA(),t.qZA()}if(2&e){const o=s.$implicit;t.xp6(1),t.Q6J("asset",o)}}function C(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"div",8),t._UZ(1,"app-asset-movement",11),t.TgZ(2,"button",10),t.NdJ("click",function(){const d=t.CHM(o),r=d.$implicit,a=d.index;return t.oxw().removeMovement(r.id,a)}),t._uU(3,"\u043f\u0440\u0438\u0431\u0440\u0430\u0442\u0438"),t.qZA(),t.qZA()}if(2&e){const o=s.$implicit;t.xp6(1),t.Q6J("movement",o)}}let S=(()=>{class e{constructor(o,n,d){this.formBuilder=o,this.assetFormModalService=n,this.movementFormModalService=d,this.form=this.formBuilder.group({}),this.assets=new v.X([]),this.movements=new v.X([]),this.onAdd=new t.vpe}ngOnInit(){this.buildForm()}buildForm(){this.form=this.formBuilder.group({description:["",null]})}submit(){var o,n,d;if(null===(o=this.form)||void 0===o?void 0:o.valid){const c={description:null===(d=null===(n=this.form)||void 0===n?void 0:n.value)||void 0===d?void 0:d.description};this.onAdd.emit({assets:this.assets.value,movements:this.movements.value,item:c})}}onAddAsset(){this.assetFormModalService.addAsset().subscribe(o=>{this.addAssets([o])})}selectAsset(){this.assetFormModalService.selectAsset().subscribe(o=>{this.addAssets(o)})}addAssets(o){let n=[...this.assets.value];o.forEach(d=>{(!d.id||!n.some(r=>r.id===d.id))&&n.push(d)}),this.assets.next(n)}removeAsset(o,n){let d=[...this.assets.value];o&&(n=d.findIndex(r=>r.id===o)),n>-1&&d.splice(n,1),this.assets.next(d)}onAddMovement(){this.movementFormModalService.addMovement().subscribe(o=>{this.addMovements([o])})}addMovements(o){let n=[...this.movements.value];o.forEach(d=>{(!d.id||!n.some(r=>r.id===d.id))&&n.push(d)}),this.movements.next(n)}removeMovement(o,n){let d=[...this.movements.value];o&&(n=d.findIndex(r=>r.id===o)),n>-1&&d.splice(n,1),this.movements.next(d)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(i.qu),t.Y36(A.r),t.Y36(y.a))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-mapping-item-form"]],outputs:{onAdd:"onAdd"},decls:29,vars:7,consts:[["novalidate","",1,"border","p-3",3,"formGroup"],["for","item-description"],["id","item-description","formControlName","description",1,"form-control","ml-1"],[1,"border","p-2"],[1,"scroll-container"],["class","d-flex flex-row",4,"ngFor","ngForOf"],[1,"btn","btn-outline-primary",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],[1,"d-flex","flex-row"],[1,"flex-grow-1","border",3,"asset"],[1,"btn","btn-link","flex-grow-0",3,"click"],[1,"flex-grow-1","border",3,"movement"]],template:function(o,n){1&o&&(t.TgZ(0,"form",0),t.TgZ(1,"div"),t.TgZ(2,"h5"),t.TgZ(3,"label",1),t._uU(4,"\u041e\u043f\u0438\u0441"),t.qZA(),t.qZA(),t._UZ(5,"textarea",2),t.qZA(),t.TgZ(6,"div",3),t.TgZ(7,"h5"),t.TgZ(8,"label"),t._uU(9,"\u0410\u043a\u0442\u0438\u0432\u0438"),t.qZA(),t.qZA(),t.TgZ(10,"div",4),t.YNc(11,b,4,1,"div",5),t.ALo(12,"async"),t.qZA(),t.TgZ(13,"button",6),t.NdJ("click",function(){return n.selectAsset()}),t._uU(14,"\u043e\u0431\u0440\u0430\u0442\u0438 \u0410\u043a\u0442\u0438\u0432"),t.qZA(),t.TgZ(15,"button",6),t.NdJ("click",function(){return n.onAddAsset()}),t._uU(16,"\u0434\u043e\u0434\u0430\u0442\u0438 \u0410\u043a\u0442\u0438\u0432"),t.qZA(),t.qZA(),t.TgZ(17,"div",3),t.TgZ(18,"h5"),t.TgZ(19,"label"),t._uU(20,"\u041f\u043e\u0437\u0438\u0446\u0456\u0457"),t.qZA(),t.qZA(),t.TgZ(21,"div",4),t.YNc(22,C,4,1,"div",5),t.ALo(23,"async"),t.qZA(),t.TgZ(24,"button",6),t.NdJ("click",function(){return n.onAddMovement()}),t._uU(25,"\u0434\u043e\u0434\u0430\u0442\u0438 \u041f\u043e\u0437\u0438\u0446\u0456\u044e"),t.qZA(),t.qZA(),t.TgZ(26,"div"),t.TgZ(27,"button",7),t.NdJ("click",function(){return n.submit()}),t._uU(28,"\u0434\u043e\u0434\u0430\u0442\u0438 \u0432 \u0434\u0430\u043d\u0456"),t.qZA(),t.qZA(),t.qZA()),2&o&&(t.Q6J("formGroup",n.form),t.xp6(11),t.Q6J("ngForOf",t.lcZ(12,3,n.assets)),t.xp6(11),t.Q6J("ngForOf",t.lcZ(23,5,n.movements)))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u,m.sg,T.F,J.W],pipes:[m.Ov],styles:[".scroll-container[_ngcontent-%COMP%]{max-height:200px;overflow:auto}"],changeDetection:0}),e})();const E=[{path:"",component:(()=>{class e{constructor(o,n){this.store=o,this.router=n}ngOnInit(){}add(o){this.store.dispatch((0,h.Mz)(o)),this.router.navigate([Z.E.main])}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_.yh),t.Y36(l.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["add-data"]],decls:3,vars:0,consts:[[3,"onAdd"]],template:function(o,n){1&o&&(t.TgZ(0,"h4"),t._uU(1,"\u0414\u043e\u0434\u0430\u0442\u0438 \u0434\u0430\u043d\u0456"),t.qZA(),t.TgZ(2,"app-add-mapping-item-form",0),t.NdJ("onAdd",function(r){return n.add(r)}),t.qZA())},directives:[S],styles:[""],changeDetection:0}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[l.Bz.forChild(E)],l.Bz]}),e})();var M=u(4312);let x=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,i.u5,i.UX]]}),e})();var f=u(8796);let U=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,i.u5,i.UX,f.o]]}),e})(),w=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[A.r],imports:[[m.ez,M.IJ,x,U]]}),e})(),B=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,i.UX,i.u5]]}),e})(),g=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,i.u5,i.UX,B]]}),e})(),D=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,g,i.u5,i.UX]]}),e})(),F=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,i.u5,i.UX,g,M.IJ]]}),e})(),j=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,F]]}),e})(),z=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,j,F]]}),e})();var X=u(4741);let N=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,i.u5,i.UX,w,f.o,D,z,X.Y]]}),e})(),L=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[m.ez,I,N]]}),e})()}}]);